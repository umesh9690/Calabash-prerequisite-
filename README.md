Introduction
   
<a name='prerequisites'>Appendix - Installation of Prerequisites</a>
======
 
1. **Install Ruby**

    Please install current **latest stable version 2.3.3**

    *Windows users* can use the [Windows installer](http://rubyinstaller.org/downloads/).

    *For Mac users*, mac os comes pre-installed with version 2.0.0. One option is to use homebrew: *'brew install ruby'* to pull in 2.3.3. 
Alternatively, if you need to be able to use 2.0.0 for other applications, then rbenv can be used 
to install 2.3.3 and manage multiple installations in parallel.
<br />

2. **Additional Steps for Windows users**
      
    Do [these additional steps](#additional_steps) if you are using Windows.
<br />

3. **Install Bundler**

        $> gem install bundler

    *NOTE: If this fails - see [Troubleshooting - Gem install issue](#gem_issue)</a>*
<br />

4. **Install Android SDK and JDK**

   You'll also need to have the Java Development Kit (JDK) installed and available. Calabash will attempt to automatically find this        from registry keys on windows, or monodroid config elsewhere, but you can also specify it explicitly by setting the JAVA_HOME            environment variable to its location (e.g. C:\Program Files\Java\jdk1.8.0_20), or having the JDK binaries themselves (i.e. C:\Program    Files\Java\jdk1.8.0_20\bin) in your path.

   You should have the Android SDK installed. You can download it from [here](https://developer.android.com/studio/index.html). Create      an environment variable with the name : ANDROID_HOME and its value pointing to the location of the unzipped downloaded SDK.

   To compile Calabash-Android from source, you will also need to have Ant installed and added to your path. It can be downloaded from        [here](https://ant.apache.org/bindownload.cgi).
  

<br />
<br />

<a name='additional_steps'>Appendix - Additional Setup Steps for Windows</a>
---
1. **Confgure SSL certs for Ruby/OpenSSL**

    To make api requests against our https endpoints, Ruby needs to have access to a recent certificate authority bundle. Without this, you will get an error like this when executing tests against the Api channel:
             
             SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
    
    Download the cacert.pem file [here](http://curl.haxx.se/ca/cacert.pem).
     
    Save the file locally, e.g. in C:\Devtools\cacerts\cacert.pem
    
    Add set path to this file against the *SSL_CERT_FILE* Environment variable on your system, e.g.:
    
        SSL_CERT_FILE=C:\Devtools\cacerts\cacert.pem

2. **Install Ruby Devkit**

    Some gems require Ruby Devkit to install on Windows.

    On the [Windows installer](http://rubyinstaller.org/downloads/) site, under 'DEVELOPMENT KIT', select the relevant download for 'Ruby 2.0 and above'. Unzip this to a local directory, e.g. C:\RubyDevkit.

    Then bind the DevKit to your local Ruby installation, by running these commands from within the DevKit folder:

        ruby dk.rb init
        ruby dk.rb install

    See [here for further information](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit) on the DevKit.

    If you use the x64 version of ruby you might get an error saying `Invalid configuration. Please fix ‘config.yml’ and re-run ‘ruby dk.rb install’`.
    
    [Edit the config.yml file and give the path of Ruby directory ex:- 'C:/ruby21-x64'](http://stackoverflow.com/questions/16523607/cant-get-ruby-devkit-configuration-file-autogenerated-properly)
    

3. **Setup for coloured Cucmber output**

    The Windows command shell does not provide coloured output as standard.

    If you want to see coloured cucumber output when running tests from the command line on Windows, one option is to use the ConEmu terminal application. 

    The ConEmu installer is available [from here](https://www.fosshub.com/ConEmu.html).

    Note that you can configure ConEmu to load the git-bash shell by selecting git-bash from the 'Choose your startup task...' setting. 

<br />
<br />

<a name='gem_issue'>Appendix - Troubleshooting: Gem install issue</a>
---

If you get an error like this when attempting to use *gem install*:

        SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
    
This is a known issue with an outdated certificate file in the version of Rubygems that is bundled with Ruby, related to the transition to SHA-2 digests.

To resolve this, you need to manually upgrade to a newer version of Rubygems, as follows:

1. Download latest gem updater [rubygems-update-2.6.8.gem](https://rubygems.org/downloads/rubygems-update-2.6.8.gem) to your local file system, e.g. to C:\ drive

2. Install and run it:

        C:\>gem install --local C:\rubygems-update-2.6.8.gem
        C:\>update_rubygems --no-ri --no-rdoc

3. Confirm gem has been updated:

        > gem --version
        2.6.8

4. Clean-up - uninstall the update gem as follows (and remove the downloaded .gem file)

        C:\>gem uninstall rubygems-update -x
        Removing update_rubygems
